<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>$ARCA Presale | AI Agent on Base</title>
    <meta name="description" content="$ARCA presale â€” The AI agent that thinks. Trustless deposits on Base with automatic refunds.">
    <meta property="og:title" content="$ARCA Presale | AI Agent on Base">
    <meta property="og:description" content="Community presale for $ARCA. 48h window, 10% early bird bonus, trustless smart contract with automatic refunds.">
    <meta property="og:image" content="/avatar.png">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="$ARCA Presale | AI Agent on Base">
    <link rel="icon" type="image/png" href="/avatar.png">
    <script src="ethers.min.js"></script>
    <script>
        // Config for wallet connector (set before wallet-bundle loads)
        window.ARCA_CONFIG = {
            chainId: 84532,
            rpcUrl: 'https://base-sepolia.g.alchemy.com/v2/rm_fENO6bCAfkTl4PKLEE',
            wcProjectId: '267a604b2a6d3def9a69504ea62b1280',
        };
    </script>
    <script src="wallet-bundle.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Sora:wght@400;600;700;800&family=Outfit:wght@300;400;500;600;700&family=IBM+Plex+Mono:ital,wght@0,400;0,500;0,600;0,700;1,400&display=swap');

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           CSS VARIABLES â€” Exact match to main site
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        :root {
            --color-deep: #06090f;
            --color-surface: #0a1018;
            --color-card: #111827;
            --color-card-hover: #1a2540;
            --color-gold: #fbbf24;
            --color-amber: #f59e0b;
            --color-text: #f1f5f9;
            --color-text-secondary: #94a3b8;
            --color-text-muted: #64748b;
            --color-green: #22c55e;
            --color-blue: #3b82f6;
            --color-red: #ef4444;
            --color-purple: #8b5cf6;
            --font-heading: 'Sora', system-ui, sans-serif;
            --font-body: 'Outfit', system-ui, -apple-system, sans-serif;
            --font-mono: 'IBM Plex Mono', ui-monospace, 'Cascadia Code', monospace;
            --border-default: rgba(245, 158, 11, 0.08);
            --border-hover: rgba(245, 158, 11, 0.25);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           RESET & BASE
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

        html { scroll-behavior: smooth; }

        body {
            font-family: var(--font-body);
            background: var(--color-deep);
            color: var(--color-text);
            min-height: 100vh;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        ::selection {
            background: rgba(245, 158, 11, 0.3);
            color: var(--color-gold);
        }

        /* â”€â”€â”€ Scrollbar â”€â”€â”€ */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: var(--color-deep); }
        ::-webkit-scrollbar-thumb { background: rgba(245, 158, 11, 0.2); border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: rgba(245, 158, 11, 0.4); }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           NOISE OVERLAY
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .noise-overlay {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 50;
            opacity: 0.025;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
            background-repeat: repeat;
            mix-blend-mode: overlay;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           AMBIENT BACKGROUND
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .ambient {
            position: fixed; inset: 0;
            pointer-events: none; z-index: 0;
        }
        .ambient-gold {
            position: absolute; inset: 0;
            background: radial-gradient(ellipse 600px 400px at 15% 10%, rgba(245,158,11,0.06) 0%, transparent 100%);
            animation: breathe 8s ease-in-out infinite;
        }
        .ambient-blue {
            position: absolute; inset: 0;
            background: radial-gradient(ellipse 400px 600px at 85% 85%, rgba(59,130,246,0.03) 0%, transparent 100%);
            animation: breathe 8s ease-in-out infinite;
            animation-delay: 4s;
        }
        .ambient-purple {
            position: absolute; inset: 0;
            background: radial-gradient(ellipse 300px 300px at 50% 50%, rgba(139,92,246,0.015) 0%, transparent 100%);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           KEYFRAMES
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        @keyframes breathe {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }
        @keyframes pulse-dot {
            0%, 100% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.4); }
            50% { box-shadow: 0 0 0 6px rgba(34, 197, 94, 0); }
        }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }
        @keyframes spin { to { transform: rotate(360deg); } }
        @keyframes shimmer {
            0% { background-position: -200% center; }
            100% { background-position: 200% center; }
        }
        @keyframes shimmer-border {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        @keyframes fade-up {
            from { opacity: 0; transform: translateY(24px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes progress-glow {
            0%, 100% { box-shadow: 0 0 8px rgba(251, 191, 36, 0.3), 0 0 20px rgba(245, 158, 11, 0.15); }
            50% { box-shadow: 0 0 12px rgba(251, 191, 36, 0.5), 0 0 30px rgba(245, 158, 11, 0.25); }
        }
        @keyframes avatar-glow {
            0%, 100% { box-shadow: 0 0 30px rgba(245, 158, 11, 0.15), 0 0 60px rgba(245, 158, 11, 0.05); }
            50% { box-shadow: 0 0 50px rgba(245, 158, 11, 0.25), 0 0 100px rgba(245, 158, 11, 0.1); }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           PAGE CONTAINER
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .page {
            position: relative; z-index: 1;
            max-width: 800px; margin: 0 auto;
            padding: 0 1.25rem 3rem;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           NAVIGATION â€” Exact match to main site
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .nav {
            display: flex; justify-content: space-between; align-items: center;
            padding: 1.25rem 0;
            border-bottom: 1px solid rgba(255,255,255,0.04);
            margin-bottom: 2.5rem;
        }
        .nav-brand {
            display: flex; align-items: center; gap: 0.625rem;
            text-decoration: none;
        }
        .nav-brand img {
            width: 30px; height: 30px; border-radius: 0.5rem;
            transition: transform 0.3s ease;
        }
        .nav-brand:hover img { transform: scale(1.05); }
        .nav-brand span {
            font-family: var(--font-heading);
            font-weight: 700;
            font-size: 0.875rem;
            color: var(--color-text);
            letter-spacing: -0.02em;
        }
        .nav-links { display: flex; gap: 0.25rem; }
        .nav-link {
            position: relative;
            padding: 0.375rem 0.75rem;
            border-radius: 0.5rem;
            font-size: 0.75rem;
            color: var(--color-text-secondary);
            text-decoration: none;
            transition: color 0.2s ease, background-color 0.2s ease;
            font-weight: 500;
            font-family: var(--font-body);
        }
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 2px; left: 50%;
            width: 0; height: 1px;
            background: var(--color-amber);
            transition: width 0.3s cubic-bezier(0.16, 1, 0.3, 1), left 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .nav-link:hover::after { width: 60%; left: 20%; }
        .nav-link:hover { color: var(--color-text); background: rgba(255,255,255,0.05); }
        .nav-link-active {
            color: var(--color-gold) !important;
            background: rgba(251, 191, 36, 0.08);
        }
        .nav-link-active::after { display: none; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           STATUS BADGE
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .status-badge {
            display: inline-flex; align-items: center; gap: 0.4rem;
            padding: 0.375rem 0.85rem; border-radius: 20px; font-size: 0.75rem;
            font-weight: 600; margin-bottom: 1rem;
            font-family: var(--font-body);
        }
        .status-badge.live {
            background: rgba(34, 197, 94, 0.12); color: var(--color-green);
            border: 1px solid rgba(34, 197, 94, 0.2);
        }
        .status-badge.early-bird {
            background: rgba(245, 158, 11, 0.12); color: var(--color-gold);
            border: 1px solid rgba(245, 158, 11, 0.2);
        }
        .status-badge.ended {
            background: rgba(239, 68, 68, 0.12); color: var(--color-red);
            border: 1px solid rgba(239, 68, 68, 0.2);
        }
        .status-badge .dot {
            width: 6px; height: 6px; border-radius: 50%;
            background: currentColor; animation: pulse-dot 2.5s ease-in-out infinite;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           HERO â€” Typography matching main site
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .hero-title {
            font-family: var(--font-heading);
            font-size: 2.5rem; font-weight: 800;
            letter-spacing: -0.04em;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, var(--color-text) 0%, var(--color-amber) 100%);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            background-clip: text;
            text-wrap: balance;
        }
        .subtitle {
            color: var(--color-text-secondary);
            font-size: 0.95rem;
            line-height: 1.6;
            margin-bottom: 1.75rem;
            font-family: var(--font-body);
            font-weight: 400;
            max-width: 560px;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SECTION DIVIDERS
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .section-divider {
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(245, 158, 11, 0.08) 20%, rgba(245, 158, 11, 0.12) 50%, rgba(245, 158, 11, 0.08) 80%, transparent);
            margin: 2rem auto;
            max-width: 80%;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SECTION HEADERS
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .section-title {
            font-family: var(--font-heading);
            font-size: 0.72rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.14em;
            color: var(--color-text-muted);
            margin-bottom: 1rem;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           CARDS â€” Glassmorphism treatment
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .card {
            background: var(--color-card);
            border: 1px solid var(--border-default);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
            transition: border-color 0.3s ease, background-color 0.3s ease;
        }
        .card:hover {
            border-color: var(--border-hover);
            background: var(--color-card-hover);
        }
        .card-title {
            font-family: var(--font-heading);
            font-size: 0.72rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--color-text-muted);
            margin-bottom: 1rem;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           PROGRESS BAR â€” Premium with glow
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .progress-wrap { margin-bottom: 1.25rem; }
        .progress-header {
            display: flex; justify-content: space-between;
            margin-bottom: 0.5rem; align-items: baseline;
        }
        .progress-label {
            font-size: 0.8rem; color: var(--color-text-secondary);
            font-family: var(--font-body); font-weight: 500;
        }
        .progress-value {
            font-size: 0.8rem; font-weight: 600;
            font-family: var(--font-mono);
            color: var(--color-text);
        }
        .progress-bar {
            width: 100%; height: 14px;
            background: rgba(255,255,255,0.04);
            border-radius: 7px; overflow: visible;
            position: relative;
            border: 1px solid rgba(255,255,255,0.04);
        }
        .progress-fill {
            height: 100%; border-radius: 7px;
            transition: width 0.6s cubic-bezier(0.16, 1, 0.3, 1);
            background: linear-gradient(90deg, var(--color-amber), var(--color-gold), #fde68a);
            background-size: 200% 100%;
            animation: shimmer 3s linear infinite, progress-glow 3s ease-in-out infinite;
            position: relative;
        }
        .progress-fill::after {
            content: '';
            position: absolute; right: 0; top: -2px; bottom: -2px;
            width: 4px; border-radius: 2px;
            background: #fef3c7;
            box-shadow: 0 0 8px rgba(251, 191, 36, 0.6);
        }
        .progress-fill.met {
            background: linear-gradient(90deg, var(--color-green), #4ade80, #86efac);
            animation: shimmer 3s linear infinite;
        }
        .progress-fill.met::after {
            background: #bbf7d0;
            box-shadow: 0 0 8px rgba(34, 197, 94, 0.6);
        }
        .soft-cap-marker {
            position: absolute; top: -6px; bottom: -6px; width: 2px;
            background: var(--color-amber); z-index: 2;
            border-radius: 1px;
            box-shadow: 0 0 6px rgba(245, 158, 11, 0.4);
        }
        .soft-cap-label {
            position: absolute; top: -22px;
            font-size: 0.6rem; color: var(--color-amber);
            transform: translateX(-50%); white-space: nowrap;
            font-weight: 700; font-family: var(--font-heading);
            letter-spacing: 0.05em; text-transform: uppercase;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           STATS â€” Glassmorphism grid
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .stats {
            display: grid; grid-template-columns: repeat(2, 1fr);
            gap: 1px; border-radius: 0.75rem; overflow: hidden;
            background: rgba(245, 158, 11, 0.06);
            border: 1px solid rgba(245, 158, 11, 0.08);
        }
        .stat-item {
            background: rgba(17, 24, 39, 0.8);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            padding: 1rem; text-align: center;
            transition: background-color 0.2s ease;
        }
        .stat-item:hover { background: rgba(26, 37, 64, 0.6); }
        .stat-value {
            font-size: 1.25rem; font-weight: 700;
            font-family: var(--font-mono);
            color: var(--color-amber);
            letter-spacing: -0.02em;
        }
        .stat-label {
            font-size: 0.65rem; color: var(--color-text-muted);
            margin-top: 0.25rem; font-weight: 600;
            text-transform: uppercase; letter-spacing: 0.1em;
            font-family: var(--font-body);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           COUNTDOWN TIMER
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .timer {
            display: flex; justify-content: center; gap: 0.75rem;
            margin: 1.25rem 0;
        }
        .timer-unit { text-align: center; }
        .timer-value {
            font-size: 2rem; font-weight: 700;
            font-family: var(--font-mono);
            color: var(--color-gold); min-width: 2.5rem;
            letter-spacing: -0.03em;
            text-shadow: 0 0 20px rgba(251, 191, 36, 0.2);
        }
        .timer-label {
            font-size: 0.6rem; text-transform: uppercase;
            color: var(--color-text-muted);
            letter-spacing: 0.08em; font-weight: 600;
            font-family: var(--font-heading);
        }
        .timer-sep {
            font-size: 1.5rem; color: var(--color-text-muted);
            font-weight: 700; line-height: 2;
            font-family: var(--font-mono);
            opacity: 0.5;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           EARLY BIRD BANNER
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .early-bird-banner {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.08), rgba(251, 191, 36, 0.04));
            border: 1px solid rgba(245, 158, 11, 0.15);
            border-radius: 0.75rem; padding: 1rem 1.25rem;
            margin-bottom: 1rem;
            display: flex; align-items: center; gap: 0.75rem;
        }
        .early-bird-banner .eb-icon { font-size: 1.2rem; }
        .early-bird-banner .eb-text {
            font-size: 0.85rem; color: var(--color-gold);
            font-weight: 700; font-family: var(--font-heading);
        }
        .early-bird-banner .eb-sub {
            font-size: 0.75rem; color: var(--color-text-muted);
            line-height: 1.5; margin-top: 0.15rem;
            font-family: var(--font-body);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           NETWORK WARNING
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .network-warning {
            background: rgba(239, 68, 68, 0.08); border: 1px solid rgba(239, 68, 68, 0.15);
            border-radius: 0.75rem; padding: 0.85rem 1.1rem; margin-bottom: 1rem;
            font-size: 0.82rem; color: var(--color-red); display: none;
            font-family: var(--font-body);
        }
        .network-warning a { color: var(--color-amber); }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           CONTRIBUTE FORM
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .form-group { margin-bottom: 1rem; }
        .form-label {
            font-size: 0.8rem; font-weight: 600; color: var(--color-text-secondary);
            margin-bottom: 0.5rem; display: flex; justify-content: space-between;
            font-family: var(--font-body);
        }
        .input-wrap {
            display: flex; align-items: center;
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(255,255,255,0.06);
            border-radius: 0.75rem;
            padding: 0 1rem; transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }
        .input-wrap:focus-within {
            border-color: var(--color-amber);
            box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.08);
        }
        .input-wrap input {
            flex: 1; background: none; border: none; color: var(--color-text);
            font-size: 1.1rem; font-family: var(--font-mono);
            padding: 0.85rem 0; outline: none; width: 100%;
            font-weight: 500;
        }
        .input-wrap input::placeholder { color: var(--color-text-muted); }
        .input-suffix {
            color: var(--color-text-muted); font-size: 0.85rem;
            font-weight: 600; font-family: var(--font-mono);
        }
        .quick-amounts { display: flex; gap: 0.4rem; margin-top: 0.5rem; }
        .quick-btn {
            flex: 1; padding: 0.5rem; border: 1px solid rgba(255,255,255,0.06);
            border-radius: 0.5rem; background: rgba(255,255,255,0.02);
            color: var(--color-text-secondary); font-size: 0.75rem; font-weight: 600;
            cursor: pointer; transition: all 0.2s ease;
            font-family: var(--font-mono);
        }
        .quick-btn:hover {
            border-color: var(--color-amber); color: var(--color-amber);
            background: rgba(245,158,11,0.06);
        }

        /* Allocation preview */
        .allocation {
            background: rgba(245, 158, 11, 0.04);
            border: 1px solid rgba(245, 158, 11, 0.1);
            border-radius: 0.5rem; padding: 0.85rem 1rem;
            margin-bottom: 1rem;
            display: flex; justify-content: space-between; align-items: center;
        }
        .allocation-label {
            font-size: 0.8rem; color: var(--color-amber);
            font-family: var(--font-body); font-weight: 500;
        }
        .allocation-value {
            font-size: 0.9rem; font-weight: 700; color: var(--color-gold);
            font-family: var(--font-mono);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           BUTTONS
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .btn {
            width: 100%; padding: 1rem; border: none; border-radius: 0.75rem;
            font-size: 0.9rem; font-weight: 700; cursor: pointer;
            transition: all 0.2s ease; font-family: var(--font-heading);
            letter-spacing: 0.01em;
        }
        .btn-primary {
            background: linear-gradient(135deg, var(--color-amber), var(--color-gold), #fde68a);
            background-size: 200% 200%;
            color: #000;
            box-shadow: 0 4px 20px rgba(245, 158, 11, 0.25), 0 0 0 1px rgba(251, 191, 36, 0.2);
            animation: shimmer-border 4s ease-in-out infinite;
        }
        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 8px 30px rgba(245, 158, 11, 0.4), 0 0 0 1px rgba(251, 191, 36, 0.3);
        }
        .btn-primary:disabled {
            opacity: 0.4; cursor: not-allowed; transform: none;
            box-shadow: 0 2px 10px rgba(245, 158, 11, 0.1);
            animation: none;
        }
        .btn-connect {
            background: linear-gradient(135deg, var(--color-amber), var(--color-gold), #fde68a);
            background-size: 200% 200%;
            color: #000;
            box-shadow: 0 4px 20px rgba(245, 158, 11, 0.25), 0 0 0 1px rgba(251, 191, 36, 0.2);
            animation: shimmer-border 4s ease-in-out infinite;
        }
        .btn-connect:hover {
            transform: translateY(-1px);
            box-shadow: 0 8px 30px rgba(245, 158, 11, 0.4), 0 0 0 1px rgba(251, 191, 36, 0.3);
        }
        .btn-refund {
            background: rgba(239, 68, 68, 0.08); color: var(--color-red);
            border: 1px solid rgba(239, 68, 68, 0.15); margin-top: 0.5rem;
        }
        .btn-refund:hover { background: rgba(239, 68, 68, 0.15); }
        .btn-refund:disabled { opacity: 0.3; cursor: not-allowed; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           WALLET INFO
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .wallet-info {
            display: flex; align-items: center; gap: 0.5rem;
            padding: 0.6rem 0.85rem;
            background: rgba(34, 197, 94, 0.06);
            border: 1px solid rgba(34, 197, 94, 0.12);
            border-radius: 0.5rem; margin-bottom: 1rem; font-size: 0.78rem;
        }
        .wallet-dot {
            width: 6px; height: 6px; border-radius: 50%;
            background: var(--color-green);
            animation: pulse-dot 2.5s ease-in-out infinite;
        }
        .wallet-addr {
            color: var(--color-green); font-family: var(--font-mono);
            font-weight: 600; font-size: 0.78rem;
        }
        .wallet-bal {
            color: var(--color-text-muted); margin-left: auto;
            font-family: var(--font-mono); font-size: 0.75rem;
        }
        .btn-disconnect {
            background: none; border: none; color: var(--color-text-muted);
            cursor: pointer; font-size: 0.7rem; padding: 0.2rem 0.4rem;
            transition: color 0.2s ease;
        }
        .btn-disconnect:hover { color: var(--color-red); }

        /* Your contribution */
        .your-contribution {
            background: rgba(34, 197, 94, 0.04);
            border: 1px solid rgba(34, 197, 94, 0.1);
            border-radius: 0.5rem; padding: 0.85rem 1rem;
            margin-bottom: 1rem;
        }
        .your-contribution .yc-title {
            font-size: 0.7rem; color: var(--color-green);
            font-weight: 700; text-transform: uppercase;
            letter-spacing: 0.06em;
            font-family: var(--font-heading);
        }
        .your-contribution .yc-row {
            display: flex; justify-content: space-between; margin-top: 0.35rem;
        }
        .your-contribution .yc-label {
            font-size: 0.78rem; color: var(--color-text-secondary);
            font-family: var(--font-body);
        }
        .your-contribution .yc-val {
            font-size: 0.78rem; font-weight: 600;
            font-family: var(--font-mono);
            color: var(--color-text);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           INFO GRID
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .info-grid { display: grid; gap: 0; }
        .info-row {
            display: flex; justify-content: space-between; align-items: center;
            padding: 0.6rem 0; border-bottom: 1px solid rgba(255,255,255,0.03);
            transition: background-color 0.2s ease;
        }
        .info-row:last-child { border-bottom: none; }
        .info-row:hover { background: rgba(255,255,255,0.015); margin: 0 -0.5rem; padding-left: 0.5rem; padding-right: 0.5rem; border-radius: 0.25rem; }
        .info-key {
            font-size: 0.8rem; color: var(--color-text-muted);
            font-family: var(--font-body); font-weight: 500;
        }
        .info-val {
            font-size: 0.8rem; font-weight: 600;
            color: var(--color-text); font-family: var(--font-mono);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           BACKED BY
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .backed-card {
            border-color: rgba(139, 92, 246, 0.12);
        }
        .backed-card:hover {
            border-color: rgba(139, 92, 246, 0.25);
        }
        .backed-card .card-title { color: var(--color-purple); }
        .backer-profile {
            display: flex; align-items: flex-start; gap: 1rem;
            margin-bottom: 0.85rem;
        }
        .backer-avatar {
            width: 44px; height: 44px; border-radius: 0.75rem;
            flex-shrink: 0; object-fit: cover;
            border: 2px solid rgba(139, 92, 246, 0.2);
            transition: border-color 0.2s ease;
        }
        .backed-card:hover .backer-avatar {
            border-color: rgba(139, 92, 246, 0.4);
        }
        .backer-name {
            font-weight: 700; font-size: 0.95rem;
            font-family: var(--font-heading);
            color: var(--color-text);
        }
        .backer-role {
            font-size: 0.78rem; color: var(--color-text-secondary);
            margin-top: 0.15rem; font-family: var(--font-body);
        }
        .backer-desc {
            font-size: 0.8rem; color: var(--color-text-secondary);
            line-height: 1.6; margin-bottom: 0.85rem;
            font-family: var(--font-body);
        }
        .backer-note {
            margin-top: 0.85rem; padding: 0.7rem 0.85rem;
            background: rgba(139, 92, 246, 0.05);
            border: 1px solid rgba(139, 92, 246, 0.08);
            border-radius: 0.5rem; font-size: 0.75rem;
            color: var(--color-text-muted); line-height: 1.5;
            font-family: var(--font-body);
        }
        .backer-note strong {
            color: var(--color-text-secondary); font-weight: 600;
        }
        .backer-socials a {
            color: var(--color-purple); text-decoration: none;
            transition: color 0.2s ease; font-weight: 500;
        }
        .backer-socials a:hover { color: #a78bfa; text-decoration: underline; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           ANTI-RUG TRUST ITEMS
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .trust-list { display: grid; gap: 0.5rem; margin-top: 0.5rem; }
        .trust-item {
            display: flex; align-items: flex-start; gap: 0.75rem;
            font-size: 0.8rem; color: var(--color-text-secondary);
            line-height: 1.5;
            padding: 0.75rem;
            background: rgba(255,255,255,0.02);
            border: 1px solid rgba(255,255,255,0.03);
            border-radius: 0.5rem;
            transition: all 0.2s ease;
            font-family: var(--font-body);
        }
        .trust-item:hover {
            background: rgba(255,255,255,0.04);
            border-color: var(--border-default);
        }
        .trust-icon {
            font-size: 0.9rem; flex-shrink: 0; margin-top: 0.05rem;
        }
        .trust-item a {
            color: var(--color-amber); text-decoration: none;
            transition: color 0.2s ease;
        }
        .trust-item a:hover { color: var(--color-gold); text-decoration: underline; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           CONTRIBUTORS LIST
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .contributors-list {
            max-height: 200px; overflow-y: auto; margin-top: 0.5rem;
        }
        .contributor-row {
            display: flex; justify-content: space-between; align-items: center;
            padding: 0.45rem 0;
            border-bottom: 1px solid rgba(255,255,255,0.02);
            font-size: 0.75rem;
        }
        .contributor-addr {
            color: var(--color-text-secondary); font-family: var(--font-mono);
        }
        .contributor-amount {
            color: var(--color-text); font-family: var(--font-mono); font-weight: 600;
        }
        .contributor-badge {
            font-size: 0.6rem; padding: 0.1rem 0.35rem; border-radius: 4px;
            background: rgba(245, 158, 11, 0.1); color: var(--color-gold);
            margin-left: 0.3rem; font-family: var(--font-mono); font-weight: 600;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           CONTRACT LINK
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .contract-link {
            text-align: center; margin-top: 1.5rem; font-size: 0.75rem;
            color: var(--color-text-muted); font-family: var(--font-body);
        }
        .contract-link a {
            color: var(--color-text-muted); text-decoration: none;
            font-family: var(--font-mono); font-weight: 500;
            transition: color 0.2s ease;
        }
        .contract-link a:hover { color: var(--color-amber); }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           TOAST
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .toast {
            position: fixed; bottom: 1.5rem; left: 50%; transform: translateX(-50%);
            padding: 0.8rem 1.5rem; border-radius: 0.75rem; font-size: 0.82rem;
            font-weight: 600; z-index: 100; opacity: 0; transition: opacity 0.3s ease;
            pointer-events: none; max-width: 90%;
            font-family: var(--font-body);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
        }
        .toast.show { opacity: 1; }
        .toast.success { background: rgba(34, 197, 94, 0.9); color: #fff; }
        .toast.error { background: rgba(239, 68, 68, 0.9); color: #fff; }
        .toast.info { background: rgba(59, 130, 246, 0.9); color: #fff; }

        /* Spinner */
        .spinner {
            display: inline-block; width: 16px; height: 16px;
            border: 2px solid rgba(0,0,0,0.2); border-top: 2px solid #000;
            border-radius: 50%; animation: spin 0.8s linear infinite;
            vertical-align: middle; margin-right: 0.4rem;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           FOOTER â€” Exact match to main site
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .footer {
            position: relative; text-center; padding: 2.5rem 0 2rem;
            margin-top: 1.5rem; text-align: center;
        }
        .footer-brand {
            display: flex; align-items: center; justify-content: center;
            gap: 0.75rem; margin-bottom: 1rem;
        }
        .footer-brand img {
            width: 20px; height: 20px; border-radius: 0.375rem; opacity: 0.4;
        }
        .footer-brand span {
            font-family: var(--font-mono); font-size: 0.7rem;
            color: var(--color-text-muted); letter-spacing: -0.02em;
        }
        .footer p {
            color: var(--color-text-muted); font-size: 0.72rem;
            font-family: var(--font-body); line-height: 1.6;
        }
        .footer p + p { margin-top: 0.375rem; }
        .footer-link {
            position: relative; color: rgba(245, 158, 11, 0.7);
            text-decoration: none; transition: color 0.2s ease;
        }
        .footer-link:hover { color: var(--color-amber); }
        .footer-link::after {
            content: ''; position: absolute;
            bottom: -1px; left: 0; width: 0; height: 1px;
            background: currentColor;
            transition: width 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .footer-link:hover::after { width: 100%; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           RESPONSIVE
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        @media (max-width: 640px) {
            .hero-title { font-size: 1.75rem; }
            .stats { grid-template-columns: repeat(2, 1fr); }
            .timer-value { font-size: 1.5rem; }
            .card { padding: 1.15rem; }
            .nav-links { gap: 0.1rem; }
            .nav-link { padding: 0.35rem 0.5rem; font-size: 0.7rem; }
        }
        @media (max-width: 480px) {
            .nav-links { display: none; }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           REDUCED MOTION
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        .hidden { display: none !important; }
    </style>
</head>
<body>
    <!-- Noise grain overlay -->
    <div class="noise-overlay" aria-hidden="true"></div>

    <!-- Ambient background -->
    <div class="ambient" aria-hidden="true">
        <div class="ambient-gold"></div>
        <div class="ambient-blue"></div>
        <div class="ambient-purple"></div>
    </div>

    <div class="page">
        <!-- Nav â€” matches main site -->
        <nav class="nav">
            <a href="/" class="nav-brand">
                <img src="/avatar.png" alt="Arca">
                <span>arcabot.eth</span>
            </a>
            <div class="nav-links">
                <a href="https://paragraph.com/@arcabot" class="nav-link" target="_blank" rel="noopener">Blog</a>
                <a href="https://farcaster.xyz/arcabot" class="nav-link" target="_blank" rel="noopener">Farcaster</a>
                <a href="https://x.com/arcaboteth" class="nav-link" target="_blank" rel="noopener">Twitter</a>
                <a href="https://www.8004scan.io/agents/ethereum/22775" class="nav-link" target="_blank" rel="noopener">8004scan</a>
                <a href="/presale/" class="nav-link nav-link-active">Presale</a>
            </div>
        </nav>

        <!-- Status -->
        <div id="statusBadge" class="status-badge live">
            <span class="dot"></span>
            <span id="statusText">Loading...</span>
        </div>

        <!-- Hero -->
        <h1 class="hero-title">$ARCA Presale</h1>
        <p class="subtitle">
            The AI agent that thinks. Community presale on Base â€” trustless smart contract, automatic refunds, 10% bonus for early believers.
        </p>

        <!-- Early bird banner -->
        <div id="earlyBirdBanner" class="early-bird-banner hidden">
            <span class="eb-icon">ğŸ¦</span>
            <div>
                <div class="eb-text">Early Bird Active â€” 10% Bonus!</div>
                <div class="eb-sub">Contribute before the soft cap is reached and your allocation is weighted as if you sent 10% more. You're taking the real risk â€” you deserve more.</div>
            </div>
        </div>

        <!-- Network warning -->
        <div id="networkWarning" class="network-warning">
            âš ï¸ Please switch to <strong>Base</strong> network. <a href="#" id="switchNetwork">Switch now</a>
        </div>

        <!-- Progress Card -->
        <div class="card">
            <div class="card-title">Presale Progress</div>
            <div class="progress-wrap">
                <div class="progress-header">
                    <span class="progress-label">Raised</span>
                    <span class="progress-value"><span id="raisedEth">0.00</span> / <span id="hardCapEth">12.50</span> ETH</span>
                </div>
                <div class="progress-bar" style="position: relative;">
                    <div id="progressFill" class="progress-fill" style="width: 0%;"></div>
                    <div id="softCapMarker" class="soft-cap-marker" style="left: 40%;">
                        <span class="soft-cap-label">Soft Cap</span>
                    </div>
                </div>
            </div>
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-value" id="raisedUsd">$0</div>
                    <div class="stat-label">Raised (USD)</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="contributorCount">0</div>
                    <div class="stat-label">Contributors</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="softCapPct">0%</div>
                    <div class="stat-label">Soft Cap Progress</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="avgContribution">0 ETH</div>
                    <div class="stat-label">Avg Contribution</div>
                </div>
            </div>
        </div>

        <!-- Timer Card -->
        <div class="card">
            <div class="card-title" id="timerTitle">Time Remaining</div>
            <div class="timer">
                <div class="timer-unit">
                    <div class="timer-value" id="timerH">00</div>
                    <div class="timer-label">Hours</div>
                </div>
                <div class="timer-sep">:</div>
                <div class="timer-unit">
                    <div class="timer-value" id="timerM">00</div>
                    <div class="timer-label">Minutes</div>
                </div>
                <div class="timer-sep">:</div>
                <div class="timer-unit">
                    <div class="timer-value" id="timerS">00</div>
                    <div class="timer-label">Seconds</div>
                </div>
            </div>
        </div>

        <div class="section-divider"></div>

        <!-- Contribute Card -->
        <div class="card" id="contributeCard">
            <div class="card-title">Contribute</div>

            <!-- Connect Wallet -->
            <div id="connectSection">
                <button class="btn btn-connect" id="connectBtn" onclick="openWalletModal()">
                    ğŸ”— Connect Wallet
                </button>
            </div>

            <!-- Wallet Connected -->
            <div id="walletSection" class="hidden">
                <div class="wallet-info">
                    <span class="wallet-dot"></span>
                    <span class="wallet-addr" id="walletAddr">0x...</span>
                    <span class="wallet-bal" id="walletBal">0.00 ETH</span>
                    <button class="btn-disconnect" onclick="disconnectWallet()">âœ•</button>
                </div>

                <!-- Your existing contribution -->
                <div id="yourContribution" class="your-contribution hidden">
                    <div class="yc-title">Your Contribution</div>
                    <div class="yc-row">
                        <span class="yc-label">ETH Sent</span>
                        <span class="yc-val" id="yourActual">0 ETH</span>
                    </div>
                    <div class="yc-row">
                        <span class="yc-label">Effective Weight</span>
                        <span class="yc-val" id="yourEffective">0 ETH</span>
                    </div>
                    <div class="yc-row">
                        <span class="yc-label">Remaining Capacity</span>
                        <span class="yc-val" id="yourRemaining">1.00 ETH</span>
                    </div>
                </div>

                <div class="form-group">
                    <div class="form-label">
                        <span>Amount</span>
                        <span style="font-size: 0.7rem; color: var(--color-text-muted);">Min 0.01 Â· Max 1 ETH</span>
                    </div>
                    <div class="input-wrap">
                        <input type="number" id="ethAmount" placeholder="0.00" step="0.01" min="0.01" max="1" oninput="updateAllocation()">
                        <span class="input-suffix">ETH</span>
                    </div>
                    <div class="quick-amounts">
                        <button class="quick-btn" onclick="setAmount(0.01)">0.01</button>
                        <button class="quick-btn" onclick="setAmount(0.1)">0.1</button>
                        <button class="quick-btn" onclick="setAmount(0.25)">0.25</button>
                        <button class="quick-btn" onclick="setAmount(0.5)">0.5</button>
                        <button class="quick-btn" onclick="setAmount(1)">MAX</button>
                    </div>
                </div>

                <div id="allocationPreview" class="allocation hidden">
                    <span class="allocation-label">Estimated $ARCA allocation</span>
                    <span class="allocation-value" id="estAllocation">â€”</span>
                </div>

                <button class="btn btn-primary" id="contributeBtn" onclick="contribute()" disabled>
                    Contribute
                </button>

                <button class="btn btn-refund hidden" id="refundBtn" onclick="requestRefund()" disabled>
                    Request Refund
                </button>
            </div>
        </div>

        <div class="section-divider"></div>

        <!-- Presale Details -->
        <div class="card">
            <div class="card-title">Presale Details</div>
            <div class="info-grid">
                <div class="info-row">
                    <span class="info-key">Token</span>
                    <span class="info-val">$ARCA on Base</span>
                </div>
                <div class="info-row">
                    <span class="info-key">Supply</span>
                    <span class="info-val">100,000,000,000</span>
                </div>
                <div class="info-row">
                    <span class="info-key">Presale Allocation</span>
                    <span class="info-val">10% (10B ARCA)</span>
                </div>
                <div class="info-row">
                    <span class="info-key">Soft Cap</span>
                    <span class="info-val" id="softCapDisplay">5.00 ETH (~$10K)</span>
                </div>
                <div class="info-row">
                    <span class="info-key">Hard Cap</span>
                    <span class="info-val" id="hardCapDisplay">12.50 ETH (~$25K)</span>
                </div>
                <div class="info-row">
                    <span class="info-key">Duration</span>
                    <span class="info-val">48 hours</span>
                </div>
                <div class="info-row">
                    <span class="info-key">Min / Max</span>
                    <span class="info-val">0.01 / 1 ETH</span>
                </div>
                <div class="info-row">
                    <span class="info-key">Early Bird</span>
                    <span class="info-val" style="color: var(--color-gold);">+10% before soft cap</span>
                </div>
                <div class="info-row">
                    <span class="info-key">Vesting</span>
                    <span class="info-val">7d lock + 7d vest</span>
                </div>
                <div class="info-row">
                    <span class="info-key">LP Allocation</span>
                    <span class="info-val">85% of supply</span>
                </div>
            </div>
        </div>

        <!-- Backed By -->
        <div class="card backed-card">
            <div class="card-title">Backed By</div>
            <div class="backer-profile">
                <img src="neetguy-avatar.png" alt="neetguy.eth" class="backer-avatar">
                <div>
                    <div class="backer-name">neetguy.eth</div>
                    <div class="backer-role">First Investor â€” 2.5% OTC Allocation</div>
                </div>
            </div>
            <div class="backer-desc">
                neetguy.eth committed before the presale was even announced â€” evaluating the project and putting his reputation behind it. His 2.5% allocation (2.5B ARCA) is distributed via the same airdrop mechanism as presale buyers.
            </div>
            <div class="info-grid" style="margin-bottom: 0;">
                <div class="info-row">
                    <span class="info-key">Allocation</span>
                    <span class="info-val">2.5% (2.5B ARCA)</span>
                </div>
                <div class="info-row">
                    <span class="info-key">Type</span>
                    <span class="info-val">OTC (pre-presale)</span>
                </div>
                <div class="info-row">
                    <span class="info-key">Vesting</span>
                    <span class="info-val">7d lock + 7d vest</span>
                </div>
                <div class="info-row">
                    <span class="info-key">Socials</span>
                    <span class="info-val backer-socials"><a href="https://warpcast.com/neetguy.eth" target="_blank">Farcaster</a> Â· <a href="https://twitter.com/theneetguy" target="_blank">Twitter</a></span>
                </div>
            </div>
            <div class="backer-note">
                ğŸ’¡ <strong>Why this matters:</strong> An experienced crypto figure evaluated the project and committed capital before anyone else. This isn't just a random token â€” it's been vetted.
            </div>
        </div>

        <div class="section-divider"></div>

        <!-- Trust / Anti-Rug -->
        <div class="card">
            <div class="card-title">Anti-Rug Design</div>
            <div class="trust-list">
                <div class="trust-item"><span class="trust-icon">ğŸ”’</span> <span>Team tokens locked 120 days (30d cliff + 90d vest) â€” longest lock of anyone</span></div>
                <div class="trust-item"><span class="trust-icon">ğŸ›¡ï¸</span> <span>Trustless contract â€” your ETH is refundable if soft cap isn't met</span></div>
                <div class="trust-item"><span class="trust-icon">ğŸ‹</span> <span>1 ETH max per wallet â€” no whale can dominate the presale</span></div>
                <div class="trust-item"><span class="trust-icon">ğŸ’§</span> <span>85% of supply goes to liquidity â€” not team wallets</span></div>
                <div class="trust-item"><span class="trust-icon">ğŸ‘¤</span> <span>Verified identity â€” ERC-8004 on 16 chains, Farcaster verified, public blog</span></div>
                <div class="trust-item"><span class="trust-icon">â°</span> <span>Safety net â€” if owner doesn't finalize within 7 days of end, refunds auto-enable</span></div>
                <div class="trust-item"><span class="trust-icon">ğŸ“–</span> <span>Open source contract â€” <a href="#" id="contractExplorer">verify on BaseScan</a></span></div>
            </div>
        </div>

        <!-- Contributors -->
        <div class="card">
            <div class="card-title">Contributors (<span id="contribCountLabel">0</span>)</div>
            <div id="contributorsList" class="contributors-list">
                <div style="text-align: center; color: var(--color-text-muted); font-size: 0.8rem; padding: 1rem; font-family: var(--font-body);">
                    No contributions yet. Be the first! ğŸš€
                </div>
            </div>
        </div>

        <!-- Contract link -->
        <div class="contract-link">
            Contract: <a href="#" id="contractAddr" target="_blank">Loading...</a>
        </div>

        <!-- Footer â€” matches main site -->
        <footer class="footer">
            <div class="section-divider" style="margin-bottom: 2rem;"></div>
            <div class="footer-brand">
                <img src="/avatar.png" alt="">
                <span>arcabot.eth</span>
            </div>
            <p>
                Hosted on
                <a href="https://ipfs.io" target="_blank" rel="noopener" class="footer-link">IPFS</a>
                Â· Served via
                <a href="https://eth.limo" target="_blank" rel="noopener" class="footer-link">eth.limo</a>
            </p>
            <p>
                Built with ğŸ§¡ by Arca &amp;
                <a href="https://etherscan.io/address/felirami.eth" target="_blank" rel="noopener" class="footer-link">felirami</a>
            </p>
        </footer>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast"></div>

    <script>
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // CONFIG â€” Update these before launch
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    const CONFIG = {
        // Contract address â€” update after deployment
        contractAddress: '0x287d647F0A4573819D2E82BC58f12D8D4f6aA78f',

        // Chain â€” TESTNET (Base Sepolia) for private testing
        chainId: 84532, // Base Sepolia
        chainName: 'Base Sepolia',
        rpcUrl: 'https://base-sepolia.g.alchemy.com/v2/rm_fENO6bCAfkTl4PKLEE',
        rpcUrlFallback: 'https://sepolia.base.org', // Public fallback
        explorerUrl: 'https://sepolia.basescan.org',

        // Token info
        presaleTokens: 10_000_000_000, // 10B ARCA
        ethPrice: 2000, // Approximate â€” updated live if possible

        // For local testing, override:
        // chainId: 31337,
        // chainName: 'Anvil (Local)',
        // rpcUrl: 'http://127.0.0.1:8545',
        // explorerUrl: '',
    };

    // ABI (minimal for what the frontend needs)
    const ABI = [
        "function deposit() external payable",
        "function refund() external",
        "function getPresaleInfo() external view returns (uint256, uint256, uint256, uint256, uint256, bool, bool, bool)",
        "function getContribution(address) external view returns (uint256, uint256)",
        "function getContributors() external view returns (address[])",
        "function contributions(address) external view returns (uint256)",
        "function effectiveContributions(address) external view returns (uint256)",
        "function maxContribution() external view returns (uint256)",
        "function totalRaised() external view returns (uint256)",
        "function finalized() external view returns (bool)",
        "event Contributed(address indexed contributor, uint256 amount, uint256 effective, bool earlyBird)",
        "event Refunded(address indexed contributor, uint256 amount)",
        "event Finalized(uint256 totalRaised, uint256 contributorCount)",
    ];

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // STATE
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    let provider = null;
    let signer = null;
    let contract = null;
    let readContract = null;
    let userAddress = null;
    let presaleInfo = null;

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // INIT
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    async function init() {
        try {
            // Read-only provider with fallback
            let readProvider;
            try {
                readProvider = new ethers.JsonRpcProvider(CONFIG.rpcUrl);
                await readProvider.getBlockNumber(); // Test connection
            } catch (e) {
                console.warn('Primary RPC failed, using fallback:', e.message);
                readProvider = new ethers.JsonRpcProvider(CONFIG.rpcUrlFallback || 'https://mainnet.base.org');
            }
            readContract = new ethers.Contract(CONFIG.contractAddress, ABI, readProvider);

            await refreshPresaleData();
            startTimer();

            // Auto-connect if previously connected
            try {
                if (window.ethereum) {
                    const accts = await window.ethereum.request({ method: 'eth_accounts' });
                    if (accts && accts.length > 0) {
                        console.log('[ARCA] Auto-reconnecting:', accts[0]);
                        window.onWalletConnected(window.ethereum, accts[0], 'Browser Wallet');
                    }
                }
            } catch (e) {
                console.warn('[ARCA] Auto-connect failed:', e);
            }
        } catch (e) {
            console.error('Init error:', e);
            showToast('Failed to load presale data. Check network.', 'error');
        }
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // WALLET
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // Called by wallet-bundle.js when a wallet connects successfully
    window.onWalletConnected = async (walletProvider, address, walletName) => {
        try {
            provider = new ethers.BrowserProvider(walletProvider);
            signer = await provider.getSigner();
            userAddress = address || await signer.getAddress();

            // Check network and try to switch
            try {
                const network = await provider.getNetwork();
                if (Number(network.chainId) !== CONFIG.chainId) {
                    document.getElementById('networkWarning').style.display = 'block';
                    try {
                        await walletProvider.request({
                            method: 'wallet_switchEthereumChain',
                            params: [{ chainId: '0x' + CONFIG.chainId.toString(16) }],
                        });
                        document.getElementById('networkWarning').style.display = 'none';
                        // Refresh provider after chain switch
                        provider = new ethers.BrowserProvider(walletProvider);
                        signer = await provider.getSigner();
                    } catch (switchError) {
                        if (switchError.code === 4902) {
                            await walletProvider.request({
                                method: 'wallet_addEthereumChain',
                                params: [{
                                    chainId: '0x' + CONFIG.chainId.toString(16),
                                    chainName: CONFIG.chainName,
                                    rpcUrls: [CONFIG.rpcUrl],
                                    nativeCurrency: { name: 'ETH', symbol: 'ETH', decimals: 18 },
                                    blockExplorerUrls: [CONFIG.explorerUrl],
                                }],
                            });
                        }
                    }
                }
            } catch (e) {
                console.warn('Network check failed:', e);
            }

            contract = new ethers.Contract(CONFIG.contractAddress, ABI, signer);

            // Update UI
            document.getElementById('connectSection').classList.add('hidden');
            document.getElementById('walletSection').classList.remove('hidden');
            document.getElementById('walletAddr').textContent = userAddress.slice(0, 6) + '...' + userAddress.slice(-4);

            // Get balance
            const balance = await provider.getBalance(userAddress);
            document.getElementById('walletBal').textContent = parseFloat(ethers.formatEther(balance)).toFixed(4) + ' ETH';

            // Get user contribution
            await refreshUserContribution();
            updateContributeButton();

            // Listen for changes (if supported)
            try {
                walletProvider.on?.('accountsChanged', () => location.reload());
                walletProvider.on?.('chainChanged', () => location.reload());
            } catch {}

            showToast(`Connected via ${walletName || 'wallet'}!`, 'success');
        } catch (e) {
            console.error('Connect error:', e);
            showToast('Failed to connect: ' + (e.message || e), 'error');
        }
    };

    window.onWalletError = (msg) => {
        showToast(msg || 'Wallet connection failed', 'error');
    };

    // Legacy fallback: direct connect for old browsers
    async function connectWallet() {
        if (window.openWalletModal) {
            window.openWalletModal();
        } else if (window.ethereum) {
            // Fallback if bundle didn't load
            const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
            window.onWalletConnected(window.ethereum, accounts[0], 'Browser Wallet');
        } else {
            showToast('No wallet detected. Install MetaMask or Coinbase Wallet.', 'error');
        }
    }

    function disconnectWallet() {
        userAddress = null;
        signer = null;
        contract = null;
        document.getElementById('connectSection').classList.remove('hidden');
        document.getElementById('walletSection').classList.add('hidden');
        document.getElementById('yourContribution').classList.add('hidden');
    }

    document.getElementById('switchNetwork')?.addEventListener('click', async (e) => {
        e.preventDefault();
        if (window.ethereum) {
            await window.ethereum.request({
                method: 'wallet_switchEthereumChain',
                params: [{ chainId: '0x' + CONFIG.chainId.toString(16) }],
            });
        }
    });

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // DATA
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    async function refreshPresaleData() {
        try {
            const info = await readContract.getPresaleInfo();
            presaleInfo = {
                totalRaised: info[0],
                softCap: info[1],
                hardCap: info[2],
                contributorCount: Number(info[3]),
                timeRemaining: Number(info[4]),
                isActive: info[5],
                isEarlyBird: info[6],
                finalized: info[7],
            };

            updateProgressUI();
            updateStatusUI();
            await refreshContributors();
        } catch (e) {
            console.error('Data refresh error:', e);
            // If contract not deployed yet, show placeholder
            document.getElementById('statusText').textContent = 'Not Started';
        }
    }

    async function refreshUserContribution() {
        if (!userAddress || !readContract) return;
        try {
            const [actual, effective] = await readContract.getContribution(userAddress);
            const maxCont = await readContract.maxContribution();
            const actualEth = parseFloat(ethers.formatEther(actual));
            const effectiveEth = parseFloat(ethers.formatEther(effective));
            const maxEth = parseFloat(ethers.formatEther(maxCont));
            const remaining = maxEth - actualEth;

            if (actualEth > 0) {
                document.getElementById('yourContribution').classList.remove('hidden');
                document.getElementById('yourActual').textContent = actualEth.toFixed(4) + ' ETH';
                document.getElementById('yourEffective').textContent = effectiveEth.toFixed(4) + ' ETH';
                document.getElementById('yourRemaining').textContent = remaining.toFixed(2) + ' ETH';

                // Update max on input
                document.getElementById('ethAmount').max = remaining;
            }

            // Show refund button if applicable
            if (actualEth > 0 && presaleInfo && !presaleInfo.isActive && !presaleInfo.finalized) {
                document.getElementById('refundBtn').classList.remove('hidden');
                document.getElementById('refundBtn').disabled = false;
            }
        } catch (e) {
            console.error('User contribution error:', e);
        }
    }

    async function refreshContributors() {
        try {
            const rawContributors = await readContract.getContributors();
            const contributors = Array.from(rawContributors); // Clone to avoid read-only Result
            const list = document.getElementById('contributorsList');
            const countLabel = document.getElementById('contribCountLabel');
            countLabel.textContent = contributors.length;

            if (contributors.length === 0) {
                list.innerHTML = '<div style="text-align: center; color: var(--color-text-muted); font-size: 0.8rem; padding: 1rem;">No contributions yet. Be the first! ğŸš€</div>';
                return;
            }

            let html = '';
            // Fetch all contributions in parallel for speed
            const contribPromises = contributors.map(addr => readContract.getContribution(addr));
            const results = await Promise.allSettled(contribPromises);

            for (let i = contributors.length - 1; i >= 0; i--) {
                const addr = contributors[i];
                const shortAddr = addr.slice(0, 6) + '...' + addr.slice(-4);
                const isYou = userAddress && addr.toLowerCase() === userAddress.toLowerCase();

                let ethVal = 0, isEarlyBird = false;
                if (results[i].status === 'fulfilled') {
                    const [actual, effective] = results[i].value;
                    ethVal = parseFloat(ethers.formatEther(actual));
                    const effVal = parseFloat(ethers.formatEther(effective));
                    isEarlyBird = effVal > ethVal * 1.001;
                }

                html += `<div class="contributor-row">
                    <span class="contributor-addr">${shortAddr}${isYou ? ' <span style="color: var(--color-green);">(you)</span>' : ''}</span>
                    <span>
                        <span class="contributor-amount">${ethVal.toFixed(4)} ETH</span>
                        ${isEarlyBird ? '<span class="contributor-badge">ğŸ¦ +10%</span>' : ''}
                    </span>
                </div>`;
            }
            list.innerHTML = html;
        } catch (e) {
            console.error('Contributors error:', e);
        }
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // UI UPDATES
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function updateProgressUI() {
        if (!presaleInfo) return;

        const raised = parseFloat(ethers.formatEther(presaleInfo.totalRaised));
        const softCap = parseFloat(ethers.formatEther(presaleInfo.softCap));
        const hardCap = parseFloat(ethers.formatEther(presaleInfo.hardCap));

        document.getElementById('raisedEth').textContent = raised.toFixed(2);
        document.getElementById('hardCapEth').textContent = hardCap.toFixed(2);
        document.getElementById('raisedUsd').textContent = '$' + Math.round(raised * CONFIG.ethPrice).toLocaleString();
        document.getElementById('contributorCount').textContent = presaleInfo.contributorCount;
        document.getElementById('softCapPct').textContent = Math.min(100, Math.round((raised / softCap) * 100)) + '%';

        const avg = presaleInfo.contributorCount > 0 ? (raised / presaleInfo.contributorCount) : 0;
        document.getElementById('avgContribution').textContent = avg.toFixed(3) + ' ETH';

        // Progress bar
        const pct = Math.min(100, (raised / hardCap) * 100);
        const fill = document.getElementById('progressFill');
        fill.style.width = pct + '%';
        if (raised >= softCap) fill.classList.add('met');

        // Soft cap marker
        const softPct = (softCap / hardCap) * 100;
        document.getElementById('softCapMarker').style.left = softPct + '%';
    }

    function updateStatusUI() {
        if (!presaleInfo) return;
        const badge = document.getElementById('statusBadge');
        const text = document.getElementById('statusText');
        const banner = document.getElementById('earlyBirdBanner');

        if (presaleInfo.finalized) {
            badge.className = 'status-badge ended';
            text.textContent = 'Finalized';
            banner.classList.add('hidden');
            document.getElementById('contributeCard').classList.add('hidden');
        } else if (!presaleInfo.isActive && presaleInfo.timeRemaining === 0) {
            badge.className = 'status-badge ended';
            text.textContent = 'Ended';
            banner.classList.add('hidden');
        } else if (presaleInfo.isEarlyBird) {
            badge.className = 'status-badge early-bird';
            text.textContent = 'Early Bird Active';
            banner.classList.remove('hidden');
        } else if (presaleInfo.isActive) {
            badge.className = 'status-badge live';
            text.textContent = 'Live';
            banner.classList.add('hidden');
        }

        // Update contract links
        if (CONFIG.explorerUrl && CONFIG.contractAddress !== '0x0000000000000000000000000000000000000000') {
            const url = CONFIG.explorerUrl + '/address/' + CONFIG.contractAddress;
            document.getElementById('contractAddr').href = url;
            document.getElementById('contractAddr').textContent = CONFIG.contractAddress.slice(0, 6) + '...' + CONFIG.contractAddress.slice(-4);
            document.getElementById('contractExplorer').href = url;
        }
    }

    function updateContributeButton() {
        const btn = document.getElementById('contributeBtn');
        if (!presaleInfo || !presaleInfo.isActive) {
            btn.disabled = true;
            btn.textContent = presaleInfo?.finalized ? 'Presale Finalized' : 'Presale Not Active';
        } else {
            btn.disabled = false;
            btn.textContent = 'Contribute';
        }
    }

    function updateAllocation() {
        const amount = parseFloat(document.getElementById('ethAmount').value) || 0;
        const preview = document.getElementById('allocationPreview');
        const est = document.getElementById('estAllocation');

        if (amount <= 0) {
            preview.classList.add('hidden');
            return;
        }

        preview.classList.remove('hidden');

        // Calculate based on current raise + this contribution
        if (presaleInfo) {
            const currentRaised = parseFloat(ethers.formatEther(presaleInfo.totalRaised));
            const effectiveAmount = presaleInfo.isEarlyBird ? amount * 1.1 : amount;
            // This is approximate â€” actual depends on total effective contributions
            const totalEffectiveEstimate = currentRaised * 1.05 + effectiveAmount; // rough avg
            const share = effectiveAmount / totalEffectiveEstimate;
            const tokens = Math.round(CONFIG.presaleTokens * share);
            est.textContent = formatNumber(tokens) + ' ARCA';
        } else {
            // Assume we're the only contributor
            const tokens = Math.round(CONFIG.presaleTokens * (amount / 12.5));
            est.textContent = '~' + formatNumber(tokens) + ' ARCA';
        }
    }

    function setAmount(val) {
        document.getElementById('ethAmount').value = val;
        updateAllocation();
    }

    function formatNumber(n) {
        if (n >= 1e9) return (n / 1e9).toFixed(2) + 'B';
        if (n >= 1e6) return (n / 1e6).toFixed(2) + 'M';
        if (n >= 1e3) return (n / 1e3).toFixed(1) + 'K';
        return n.toLocaleString();
    }


    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // TIMER
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    let timerInterval = null;
    let remainingSeconds = 0;

    function startTimer() {
        if (presaleInfo) {
            remainingSeconds = presaleInfo.timeRemaining;
        }
        updateTimerDisplay();
        timerInterval = setInterval(() => {
            if (remainingSeconds > 0) remainingSeconds--;
            updateTimerDisplay();
            if (remainingSeconds <= 0) {
                clearInterval(timerInterval);
                refreshPresaleData(); // Refresh when timer hits 0
            }
        }, 1000);
    }

    function updateTimerDisplay() {
        const h = Math.floor(remainingSeconds / 3600);
        const m = Math.floor((remainingSeconds % 3600) / 60);
        const s = remainingSeconds % 60;
        document.getElementById('timerH').textContent = String(h).padStart(2, '0');
        document.getElementById('timerM').textContent = String(m).padStart(2, '0');
        document.getElementById('timerS').textContent = String(s).padStart(2, '0');
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // TRANSACTIONS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    async function contribute() {
        if (!contract || !signer) return showToast('Connect your wallet first', 'error');

        const amount = parseFloat(document.getElementById('ethAmount').value);
        if (!amount || amount < 0.01 || amount > 1) {
            return showToast('Enter between 0.01 and 1 ETH', 'error');
        }

        const btn = document.getElementById('contributeBtn');
        btn.disabled = true;
        btn.innerHTML = '<span class="spinner"></span> Confirming...';

        try {
            const value = ethers.parseEther(amount.toString());
            const tx = await contract.deposit({ value });
            btn.innerHTML = '<span class="spinner"></span> Mining...';
            showToast('Transaction submitted! Waiting for confirmation...', 'info');

            await tx.wait();
            showToast('ğŸ‰ Contribution successful! Thank you!', 'success');

            // Refresh everything
            await refreshPresaleData();
            await refreshUserContribution();
            document.getElementById('ethAmount').value = '';
            document.getElementById('allocationPreview').classList.add('hidden');
        } catch (e) {
            console.error('Contribute error:', e);
            let msg = 'Transaction failed';
            if (e.reason) msg = e.reason;
            else if (e.message?.includes('user rejected')) msg = 'Transaction rejected';
            else if (e.message?.includes('AboveMaximum')) msg = 'Exceeds max contribution (1 ETH)';
            else if (e.message?.includes('BelowMinimum')) msg = 'Below minimum (0.01 ETH)';
            else if (e.message?.includes('HardCapExceeded')) msg = 'Hard cap reached!';
            else if (e.message?.includes('PresaleNotActive')) msg = 'Presale is not active';
            showToast(msg, 'error');
        } finally {
            updateContributeButton();
        }
    }

    async function requestRefund() {
        if (!contract || !signer) return;

        const btn = document.getElementById('refundBtn');
        btn.disabled = true;
        btn.innerHTML = '<span class="spinner"></span> Processing...';

        try {
            const tx = await contract.refund();
            showToast('Refund submitted! Waiting for confirmation...', 'info');
            await tx.wait();
            showToast('âœ… Refund successful! ETH returned to your wallet.', 'success');
            await refreshPresaleData();
            await refreshUserContribution();
        } catch (e) {
            console.error('Refund error:', e);
            let msg = 'Refund failed';
            if (e.message?.includes('RefundNotAvailable')) msg = 'Refund not available â€” soft cap was met';
            else if (e.message?.includes('user rejected')) msg = 'Transaction rejected';
            showToast(msg, 'error');
        } finally {
            btn.disabled = false;
            btn.textContent = 'Request Refund';
        }
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // TOAST
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function showToast(msg, type = 'info') {
        const toast = document.getElementById('toast');
        toast.textContent = msg;
        toast.className = 'toast ' + type + ' show';
        setTimeout(() => toast.classList.remove('show'), 4000);
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // REFRESH LOOP
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    setInterval(async () => {
        try { await refreshPresaleData(); } catch {}
        if (userAddress) {
            try { await refreshUserContribution(); } catch {}
        }
    }, 15000); // Every 15 seconds

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // BOOT
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    window.addEventListener('load', init);
    </script>
</body>
</html>
